Metadata-Version: 2.4
Name: thermal-commons-mvp
Version: 1.0.0a0
Summary: COOL - Cooperative Optimisation of Urban Loads: decentralised agentic cooling swarm for Singapore commercial buildings.
Author: DataDoms HFC
License: MIT
Keywords: energy,bacnet,citylearn,marl,streamlit
Requires-Python: >=3.10
Description-Content-Type: text/markdown
Requires-Dist: pydantic>=2.0
Requires-Dist: pydantic-settings>=2.0
Requires-Dist: bac0>=23.0
Requires-Dist: fastapi>=0.104
Requires-Dist: uvicorn[standard]>=0.24
Requires-Dist: streamlit>=1.28
Requires-Dist: pydeck>=0.8
Requires-Dist: pandas>=2.0
Requires-Dist: structlog>=23.0
Provides-Extra: simulation
Requires-Dist: citylearn>=2.0; extra == "simulation"
Provides-Extra: agents
Requires-Dist: ray[rllib]>=2.7; extra == "agents"
Provides-Extra: dev
Requires-Dist: pytest>=7.4; extra == "dev"
Requires-Dist: pytest-asyncio>=0.21; extra == "dev"
Requires-Dist: ruff>=0.1; extra == "dev"
Requires-Dist: mypy>=1.5; extra == "dev"

# COOL — Cooperative Optimisation of Urban Loads

**Mission:** Deploy a decentralised agentic cooling swarm for Singapore commercial buildings.  
**Target metric:** Maximise Carbon ROI via inter-building energy trading.

This repo implements the MVP described in `architecture.json` and laid out in `CODEBASE_PLAN.md`.

## Structure

```
thermal_commons_mvp/
├── config/         # Settings (Pydantic), constants
├── models/         # Telemetry, Bid/Ask, Trade, GridStress
├── simulation/     # CityLearn gym, grid stress generator
├── interface/      # BACnet BMS driver (BAC0)
├── agents/         # BaseAgent, RbcAgent, MarketMaker, BidGenerator
├── market/         # OrderBook, TradeExecution
├── api/            # FastAPI: telemetry & market routes
├── dashboard/      # Streamlit: gauges, carbon counter, trade log, PyDeck map
└── utils/          # CarbonCalculator, logging
tests/
├── unit/
└── integration/
```

## Setup

Requires **Python 3.10+**.

```bash
# From project root
pip install -e ".[dev]"
cp .env.example .env   # edit as needed
```

**Optional — CityLearn simulation:** The default install runs the sim in **mock mode** (no CityLearn). For real CityLearn environments, use a **separate virtualenv** and `pip install -e ".[simulation]"` there, since CityLearn pins older gymnasium/pandas.

## Run

From the **project root** (parent of `thermal_commons_mvp/`), with the package on `PYTHONPATH` or installed (`pip install -e .`):

| Component   | Command |
|------------|---------|
| **Simulation** | `python -m thermal_commons_mvp.simulation.city_gym` or `cool-sim` |
| **API**        | `uvicorn thermal_commons_mvp.api.main:app --reload` or `cool-api` |
| **Dashboard**  | `streamlit run thermal_commons_mvp/dashboard/app.py` or `cool-dash` |

## Test

```bash
# Unit tests (no FastAPI/CityLearn/BAC0 required for most)
PYTHONPATH=. pytest tests/unit/ -v

# All tests (install deps first: pip install -e ".[dev]" plus project deps)
PYTHONPATH=. pytest tests/ -v
```

## Practices

- **Config:** `config.settings` from env/`.env`; constants in `config.constants`.
- **Types:** Type hints on public APIs; Pydantic/dataclasses for DTOs.
- **Logging:** `get_logger(__name__)` from `utils.logging_utils`.
- **Time:** `datetime.now(timezone.utc)` for timestamps.

See `CODEBASE_PLAN.md` for full mapping to architecture and streams.
